{"version":3,"file":"commonHelpers4.js","sources":["../src/js/movie.js"],"sourcesContent":["// const elements = {\n//   container: document.querySelector('.js-movie-list'),\n//   loadBtn: document.querySelector('.js-load-more'),\n// };\n\n// const defaults = {\n//   poster:\n//     'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8PgItrmj9SWhclDBAmjlyFsC4w9tEKTcvDTbc2puQtQ&s',\n//   titleNotFound: 'Title not found',\n//   releaseDate: 'XXXX-XX-XX',\n//   voteAverage: 'XX.XX',\n// };\n\n// elements.loadBtn.addEventListener('click', handlerLoad);\n\n// let page = 1;\n\n// function handlerLoad() {\n//   page += 1;\n//   serviceFilms(page)\n//     .then(data => {\n//       elements.container.insertAdjacentHTML(\n//         'beforeend',\n//         createMarkup(data.results)\n//       );\n\n//       if (data.page >= data.total_pages) {\n//         elements.loadBtn.classList.replace('load-more', 'load-more-hidden');\n//       }\n//     })\n//     .catch(err => {\n//       elements.loadBtn.classList.replace('load-more', 'load-more-hidden');\n//     });\n// }\n\n// function serviceFilms(currentPage = '1') {\n//   const params = new URLSearchParams({\n//     page: currentPage,\n//     api_key: 'e7c82be7fbcb90103af6d6e6a6ca5896',\n//   });\n//   return fetch(\n//     `https://api.themoviedb.org/3/trending/movie/week?${params}`\n//   ).then(resp => {\n//     return resp.json();\n//   });\n// }\n\n// serviceFilms()\n//   .then(data => {\n//     if ('success' in data && !data.success) {\n//       throw new Error(data.status_message);\n//     }\n\n//     elements.container.insertAdjacentHTML(\n//       'beforeend',\n//       createMarkup(data.results)\n//     );\n\n//     if (data.page < data.total_pages) {\n//       elements.loadBtn.classList.replace('load-more-hidden', 'load-more');\n//     }\n//   })\n//   .catch(err => {\n//     console.log(err);\n//   });\n\n// function createMarkup(arr) {\n//   return arr\n//     .map(\n//       ({ title, release_date, vote_average, poster_path }) =>\n//         `<li>\n//           <img src=\"${\n//             poster_path\n//               ? 'https://image.tmdb.org/t/p/w500' + poster_path\n//               : defaults.poster\n//           }\" alt=\"${title || defaults.titleNotFound}\" />\n//           <div>\n//             <h2>${title || defaults.titleNotFound}</h2>\n//             <p>Release Date: ${release_date || defaults.releaseDate}</p>\n//             <p>Vote Average: ${vote_average || defaults.voteAverage}</p>\n//           </div>\n//         </li>`\n//     )\n//     .join('');\n// }\n\n/*  SCROLL INFINITY*/\n\nconst elements = {\n  container: document.querySelector('.js-movie-list'),\n  guard: document.querySelector('.js-guard'),\n};\n\nconst defaults = {\n  poster:\n    'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8PgItrmj9SWhclDBAmjlyFsC4w9tEKTcvDTbc2puQtQ&s',\n  titleNotFound: 'Title not found',\n  releaseDate: 'XXXX-XX-XX',\n  voteAverage: 'XX.XX',\n};\n\nlet page = 1;\nconst options = {\n  rootMargin: '200px',\n};\nconst observer = new IntersectionObserver(handlerLoadMore, options);\n\nfunction serviceFilms(currentPage = '1') {\n  const params = new URLSearchParams({\n    page: currentPage,\n    api_key: 'e7c82be7fbcb90103af6d6e6a6ca5896',\n  });\n  return fetch(\n    `https://api.themoviedb.org/3/trending/movie/week?${params}`\n  ).then(resp => {\n    return resp.json();\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ title, release_date, vote_average, poster_path }) =>\n        `<li>\n          <img src=\"${\n            poster_path\n              ? 'https://image.tmdb.org/t/p/w500' + poster_path\n              : defaults.poster\n          }\" alt=\"${title || defaults.titleNotFound}\" />\n          <div>\n            <h2>${title || defaults.titleNotFound}</h2>\n            <p>Release Date: ${release_date || defaults.releaseDate}</p>\n            <p>Vote Average: ${vote_average || defaults.voteAverage}</p>\n          </div>\n        </li>`\n    )\n    .join('');\n}\n\nserviceFilms()\n  .then(data => {\n    if ('success' in data && !data.success) {\n      throw new Error(data.status_message);\n    }\n\n    elements.container.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(data.results)\n    );\n    if (data.page < data.total_pages) {\n      observer.observe(elements.guard);\n    }\n  })\n  .catch(err => {\n    console.log(err);\n  });\n\nfunction handlerLoadMore(entries) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      page += 1;\n      serviceFilms(page)\n        .then(data => {\n          if ('success' in data && !data.success) {\n            throw new Error(data.status_message);\n          }\n\n          elements.container.insertAdjacentHTML(\n            'beforeend',\n            createMarkup(data.results)\n          );\n\n          if (data.page >= data.total_pages) {\n            observer.unobserve(elements.guard);\n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    }\n  });\n}\n"],"names":["elements","defaults","page","options","observer","handlerLoadMore","serviceFilms","currentPage","params","resp","createMarkup","arr","title","release_date","vote_average","poster_path","data","err","entries","entry"],"mappings":"oCAwFA,MAAMA,EAAW,CACf,UAAW,SAAS,cAAc,gBAAgB,EAClD,MAAO,SAAS,cAAc,WAAW,CAC3C,EAEMC,EAAW,CACf,OACE,uGACF,cAAe,kBACf,YAAa,aACb,YAAa,OACf,EAEA,IAAIC,EAAO,EACX,MAAMC,EAAU,CACd,WAAY,OACd,EACMC,EAAW,IAAI,qBAAqBC,EAAiBF,CAAO,EAElE,SAASG,EAAaC,EAAc,IAAK,CACvC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,KAAMD,EACN,QAAS,kCACb,CAAG,EACD,OAAO,MACL,oDAAoDC,CAAM,EAC9D,EAAI,KAAKC,GACEA,EAAK,MACb,CACH,CAEA,SAASC,EAAaC,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,MAAAC,EAAO,aAAAC,EAAc,aAAAC,EAAc,YAAAC,CAAa,IACjD;AAAA,sBAEIA,EACI,kCAAoCA,EACpCd,EAAS,MACzB,UAAoBW,GAASX,EAAS,aAAa;AAAA;AAAA,kBAEjCW,GAASX,EAAS,aAAa;AAAA,+BAClBY,GAAgBZ,EAAS,WAAW;AAAA,+BACpCa,GAAgBb,EAAS,WAAW;AAAA;AAAA,cAG9D,EACA,KAAK,EAAE,CACZ,CAEAK,EAAc,EACX,KAAKU,GAAQ,CACZ,GAAI,YAAaA,GAAQ,CAACA,EAAK,QAC7B,MAAM,IAAI,MAAMA,EAAK,cAAc,EAGrChB,EAAS,UAAU,mBACjB,YACAU,EAAaM,EAAK,OAAO,CAC/B,EACQA,EAAK,KAAOA,EAAK,aACnBZ,EAAS,QAAQJ,EAAS,KAAK,CAErC,CAAG,EACA,MAAMiB,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACnB,CAAG,EAEH,SAASZ,EAAgBa,EAAS,CAChCA,EAAQ,QAAQC,GAAS,CACnBA,EAAM,iBACRjB,GAAQ,EACRI,EAAaJ,CAAI,EACd,KAAKc,GAAQ,CACZ,GAAI,YAAaA,GAAQ,CAACA,EAAK,QAC7B,MAAM,IAAI,MAAMA,EAAK,cAAc,EAGrChB,EAAS,UAAU,mBACjB,YACAU,EAAaM,EAAK,OAAO,CACrC,EAEcA,EAAK,MAAQA,EAAK,aACpBZ,EAAS,UAAUJ,EAAS,KAAK,CAE7C,CAAS,EACA,MAAMiB,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACzB,CAAS,EAET,CAAG,CACH"}